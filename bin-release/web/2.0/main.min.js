var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Circle=function(e){function t(t,i,r){var o=e.call(this)||this;return o.colorList=[13408665,16777113,67109937,16750848,16776960,39372,13421721,13382553,10079232,16737894,16776960,3381708,13395456,10066329,13421619,16750899,16777164,39219,13421772,16737894,16737792,16777062,13395507,39372,16764057,13395456,13369446,16763955,16750848,6737151],o.init(t,i,r),o}return __extends(t,e),t.prototype.init=function(e,t,i){this.color=this.randomColor(),this.shape=new egret.Shape,this.shape.graphics.beginFill(this.color),this.shape.graphics.drawCircle(0,0,i),this.shape.graphics.endFill(),this.shape.x=i,this.shape.y=i,this.shapeX=e,this.shapeY=t,this.shapeR=i,this.addChild(this.shape),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.x=e,this.y=t},t.prototype.onTouch=function(e){var i=this.parent;this.touchEnabled=!1;var r=egret.Tween.get(this);r.to({alpha:.1},500,egret.Ease.sineOut),r.call(function(){this.visible=!1,i.removeChild(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this)},this);for(var o,s,n=[],h=[],a=this.shapeR/2,d=0,l=0;2>l;l++)for(var c=0;2>c;c++)o=this.shapeX+2*a*c,s=this.shapeY+2*a*l,n[d]=new t(o,s,a),n[d].alpha=.1,n[d].scaleX=.8,n[d].scaleY=.8,i.addChild(n[d]),h[d]=egret.Tween.get(n[d]),h[d].to({alpha:1,scaleX:1,scaleY:1},1e3,egret.Ease.sineIn),d++},t.prototype.randomColor=function(){return this.colorList[Math.round(Math.random()*this.colorList.length)]},t}(egret.Sprite);__reflect(Circle.prototype,"Circle");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.createGameScene=function(){var e=this.stage.stageWidth,t=this.stage.stageHeight,i=new egret.Bitmap,r=RES.getRes("back_jpg");i.texture=r,i.width=e,i.height=t,this.addChild(i),this.table=new egret.DisplayObjectContainer,this.addChild(this.table),this.refresh();var o=new egret.Bitmap;o.texture=RES.getRes("simon_png"),o.width=110,o.height=110,this.addChild(o),o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.refresh,this),o.x=50,o.y=720;var s=new egret.TextField;s.text="不开心的时候就捏捏这个，希望你每天都过得开心~~",s.width=350,s.height=300,s.textColor=0,this.addChild(s),s.x=180,s.y=730;var n=new egret.TextField;n.text="version：1.0\n\nauthor：Simon\n",n.width=200,n.height=300,n.size=16,n.x=10,n.y=890,this.addChild(n);var h=new egret.TextField;h.text="power by egret",h.width=200,h.height=100,h.size=16,h.x=400,h.y=920,this.addChild(h)},t.prototype.refresh=function(){this.table.removeChildren();for(var e=50,t=0;6>t;t++)for(var i=0;5>i;i++){var r=20+2*e*i,o=40+2*e*t,s=new Circle(r,o,e);this.table.addChild(s)}},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");